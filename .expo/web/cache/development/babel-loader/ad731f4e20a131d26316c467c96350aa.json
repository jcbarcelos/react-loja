{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (it) return (it = it.call(o)).next.bind(it); if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; return function () { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { BancoSql } from \"../core/db\";\nimport { useState } from \"react\";\nvar state = {\n  products: [],\n  status: \"false\"\n};\nvar db = BancoSql();\n\nfunction validation(params) {\n  var _useState, _useState2, status, setStatus, teste;\n\n  return _regeneratorRuntime.async(function validation$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _useState = useState(Boolean), _useState2 = _slicedToArray(_useState, 2), status = _useState2[0], setStatus = _useState2[1];\n          teste = [];\n          _context.next = 4;\n          return _regeneratorRuntime.awrap(db.transaction(function (tx) {\n            tx.executeSql(\"delete from car\");\n          }));\n\n        case 4:\n          _context.next = 6;\n          return _regeneratorRuntime.awrap(list().then(function (result) {\n            teste.push(result);\n            teste.map(function (item, index) {\n              console.log(item);\n\n              for (var _iterator = _createForOfIteratorHelperLoose(item), _step; !(_step = _iterator()).done;) {\n                var items = _step.value;\n\n                if (items.id == params.id) {\n                  console.log(\"true\");\n                  setStatus(true);\n                }\n              }\n            });\n          }));\n\n        case 6:\n          return _context.abrupt(\"return\", status);\n\n        case 7:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\n\nexport function list() {\n  return _regeneratorRuntime.async(function list$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return _regeneratorRuntime.awrap(db.transaction(function (tx) {\n            tx.executeSql(\"select * from car\", [], function (_, _ref) {\n              var rows = _ref.rows;\n              return state.products = rows;\n            });\n          }));\n\n        case 2:\n          console.log(state.products);\n          return _context2.abrupt(\"return\", state.products);\n\n        case 4:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\nexport function update(params) {\n  return _regeneratorRuntime.async(function update$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.next = 2;\n          return _regeneratorRuntime.awrap(db.transaction(function (tx) {\n            tx.executeSql(\"update car set name = ?, \" + \" name = ?, image = ?, price = ?,stock = ?,createdAt = ?\" + \" where id = ?;\", [params.name.toString(), params.image.toString(), params.price, params.stock, params.createdAt.toString(), params.id]);\n          }));\n\n        case 2:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\nexport function add(params) {\n  var validate, add;\n  return _regeneratorRuntime.async(function add$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.next = 2;\n          return _regeneratorRuntime.awrap(validation(params));\n\n        case 2:\n          validate = _context4.sent;\n          console.log(validate);\n\n          if (!(validate == \"true\")) {\n            _context4.next = 6;\n            break;\n          }\n\n          return _context4.abrupt(\"return\", console.log(\"Produto ja esta no carinho\"));\n\n        case 6:\n          add = {\n            id: params.id,\n            name: params.name,\n            price: params.price,\n            image: params.image,\n            stock: 1\n          };\n\n          if (!(params.id === null)) {\n            _context4.next = 9;\n            break;\n          }\n\n          return _context4.abrupt(\"return\", false);\n\n        case 9:\n          _context4.next = 11;\n          return _regeneratorRuntime.awrap(db.transaction(function (tx) {\n            tx.executeSql(\"insert into car (id, name,image, price,stock,createdAt) values (?,?,?,?,?,?)\", [params.id, params.name.toString(), params.image.toString(), params.price, params.stock, params.createdAt.toString()]);\n          }));\n\n        case 11:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}","map":{"version":3,"sources":["/home/jc/projetos/cursos/node/reactnative/loja/src/service/index.tsx"],"names":["BancoSql","useState","state","products","status","db","validation","params","Boolean","setStatus","teste","transaction","tx","executeSql","list","then","result","push","map","item","index","console","log","items","id","_","rows","update","name","toString","image","price","stock","createdAt","add","validate"],"mappings":";;;;;;;;;AACA,SAASA,QAAT;AACA,SAAgBC,QAAhB,QAAgC,OAAhC;AAEA,IAAMC,KAAU,GAAG;AACjBC,EAAAA,QAAQ,EAAE,EADO;AAEjBC,EAAAA,MAAM,EAAE;AAFS,CAAnB;AAIA,IAAMC,EAAE,GAAGL,QAAQ,EAAnB;;AAEA,SAAeM,UAAf,CAA0BC,MAA1B;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,sBAC8BN,QAAQ,CAACO,OAAD,CADtC,6CACSJ,MADT,kBACiBK,SADjB;AAEMC,UAAAA,KAFN,GAEmB,EAFnB;AAAA;AAAA,2CAGQL,EAAE,CAACM,WAAH,CAAe,UAACC,EAAD,EAAQ;AAC3BA,YAAAA,EAAE,CAACC,UAAH,CAAc,iBAAd;AACD,WAFK,CAHR;;AAAA;AAAA;AAAA,2CAOQC,IAAI,GAAGC,IAAP,CAAY,UAACC,MAAD,EAAiB;AACjCN,YAAAA,KAAK,CAACO,IAAN,CAAWD,MAAX;AACAN,YAAAA,KAAK,CAACQ,GAAN,CAAU,UAACC,IAAD,EAAYC,KAAZ,EAA8B;AACtCC,cAAAA,OAAO,CAACC,GAAR,CAAYH,IAAZ;;AACA,mEAAkBA,IAAlB,wCAAwB;AAAA,oBAAfI,KAAe;;AACtB,oBAAIA,KAAK,CAACC,EAAN,IAAYjB,MAAM,CAACiB,EAAvB,EAA2B;AACzBH,kBAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACAb,kBAAAA,SAAS,CAAC,IAAD,CAAT;AAED;AACF;AACF,aATD;AAUD,WAZK,CAPR;;AAAA;AAAA,2CAoBSL,MApBT;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAuBA,OAAO,SAAeU,IAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CACCT,EAAE,CAACM,WAAH,CAAe,UAACC,EAAD,EAAQ;AAC3BA,YAAAA,EAAE,CAACC,UAAH,CACE,mBADF,EAEE,EAFF,EAGE,UAACY,CAAD;AAAA,kBAAMC,IAAN,QAAMA,IAAN;AAAA,qBAAkBxB,KAAK,CAACC,QAAN,GAAiBuB,IAAnC;AAAA,aAHF;AAKD,WANK,CADD;;AAAA;AAQLL,UAAAA,OAAO,CAACC,GAAR,CAAYpB,KAAK,CAACC,QAAlB;AARK,4CAUED,KAAK,CAACC,QAVR;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAYP,OAAO,SAAewB,MAAf,CAAsBpB,MAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CACCF,EAAE,CAACM,WAAH,CAAe,UAACC,EAAD,EAAQ;AAC3BA,YAAAA,EAAE,CAACC,UAAH,CACE,8BACE,yDADF,GAEE,gBAHJ,EAIE,CACEN,MAAM,CAACqB,IAAP,CAAYC,QAAZ,EADF,EAEEtB,MAAM,CAACuB,KAAP,CAAaD,QAAb,EAFF,EAGEtB,MAAM,CAACwB,KAHT,EAIExB,MAAM,CAACyB,KAJT,EAKEzB,MAAM,CAAC0B,SAAP,CAAiBJ,QAAjB,EALF,EAMEtB,MAAM,CAACiB,EANT,CAJF;AAaD,WAdK,CADD;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAkBP,OAAO,SAAeU,GAAf,CAAmB3B,MAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CACqBD,UAAU,CAACC,MAAD,CAD/B;;AAAA;AACD4B,UAAAA,QADC;AAELd,UAAAA,OAAO,CAACC,GAAR,CAAYa,QAAZ;;AAFK,gBAGDA,QAAQ,IAAI,MAHX;AAAA;AAAA;AAAA;;AAAA,4CAIId,OAAO,CAACC,GAAR,CAAY,4BAAZ,CAJJ;;AAAA;AAMCY,UAAAA,GAND,GAMO;AACVV,YAAAA,EAAE,EAAEjB,MAAM,CAACiB,EADD;AAEVI,YAAAA,IAAI,EAAErB,MAAM,CAACqB,IAFH;AAGVG,YAAAA,KAAK,EAAExB,MAAM,CAACwB,KAHJ;AAIVD,YAAAA,KAAK,EAAEvB,MAAM,CAACuB,KAJJ;AAKVE,YAAAA,KAAK,EAAE;AALG,WANP;;AAAA,gBAaDzB,MAAM,CAACiB,EAAP,KAAc,IAbb;AAAA;AAAA;AAAA;;AAAA,4CAcI,KAdJ;;AAAA;AAAA;AAAA,2CAgBCnB,EAAE,CAACM,WAAH,CAAe,UAACC,EAAD,EAAQ;AAC3BA,YAAAA,EAAE,CAACC,UAAH,CACE,8EADF,EAEE,CACEN,MAAM,CAACiB,EADT,EAEEjB,MAAM,CAACqB,IAAP,CAAYC,QAAZ,EAFF,EAGEtB,MAAM,CAACuB,KAAP,CAAaD,QAAb,EAHF,EAIEtB,MAAM,CAACwB,KAJT,EAKExB,MAAM,CAACyB,KALT,EAMEzB,MAAM,CAAC0B,SAAP,CAAiBJ,QAAjB,EANF,CAFF;AAWD,WAZK,CAhBD;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA","sourcesContent":["import { Product } from \"../interfaces/product\";\nimport { BancoSql } from \"../core/db\";\nimport React, { useState } from \"react\";\n\nconst state: any = {\n  products: [],\n  status: \"false\",\n};\nconst db = BancoSql();\n\nasync function validation(params: Product) {\n  const [status, setStatus] = useState(Boolean);\n  let teste: any = [];\n  await db.transaction((tx) => {\n    tx.executeSql(\"delete from car\");\n  });\n\n  await list().then((result: any) => {\n    teste.push(result);\n    teste.map((item: any, index: number) => {\n      console.log(item);\n      for (let items of item) {\n        if (items.id == params.id) {\n          console.log(\"true\");\n          setStatus(true);\n          //alert(\"No\");\n        }\n      }\n    });\n  });\n  return status;\n}\n\nexport async function list() {\n  await db.transaction((tx) => {\n    tx.executeSql(\n      \"select * from car\",\n      [],\n      (_, { rows }) => (state.products = rows)\n    );\n  });\n  console.log(state.products);\n\n  return state.products;\n}\nexport async function update(params: Product) {\n  await db.transaction((tx) => {\n    tx.executeSql(\n      \"update car set name = ?, \" +\n        \" name = ?, image = ?, price = ?,stock = ?,createdAt = ?\" +\n        \" where id = ?;\",\n      [\n        params.name.toString(),\n        params.image.toString(),\n        params.price,\n        params.stock,\n        params.createdAt.toString(),\n        params.id,\n      ]\n    );\n  });\n}\n\nexport async function add(params: Product) {\n  let validate: any = await validation(params);\n  console.log(validate);\n  if (validate == \"true\") {\n    return console.log(\"Produto ja esta no carinho\");\n  }\n  const add = {\n    id: params.id,\n    name: params.name,\n    price: params.price,\n    image: params.image,\n    stock: 1,\n  };\n  if (params.id === null) {\n    return false;\n  }\n  await db.transaction((tx) => {\n    tx.executeSql(\n      \"insert into car (id, name,image, price,stock,createdAt) values (?,?,?,?,?,?)\",\n      [\n        params.id,\n        params.name.toString(),\n        params.image.toString(),\n        params.price,\n        params.stock,\n        params.createdAt.toString(),\n      ]\n    );\n  });\n}\n"]},"metadata":{},"sourceType":"module"}