{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { BancoSql } from \"../core/db\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nvar state = {\n  products: [],\n  status: \"\",\n  items: []\n};\nvar db = BancoSql();\n\nfunction validation(params) {\n  var result, index;\n  return _regeneratorRuntime.async(function validation$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return _regeneratorRuntime.awrap(list());\n\n        case 2:\n          result = _context.sent;\n          index = 0;\n\n        case 4:\n          if (!(index < (result == null ? void 0 : result.length))) {\n            _context.next = 17;\n            break;\n          }\n\n          if (!(result[index].id == params.id)) {\n            _context.next = 11;\n            break;\n          }\n\n          state.status = \"true\";\n          error(\"Produto ja esta no carinho\");\n          return _context.abrupt(\"return\", state.status);\n\n        case 11:\n          state.status = \"false\";\n          success(\"Produto add no carinho\");\n          return _context.abrupt(\"return\", state.status);\n\n        case 14:\n          index++;\n          _context.next = 4;\n          break;\n\n        case 17:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\n\nexport function list() {\n  return _regeneratorRuntime.async(function list$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.prev = 0;\n          _context2.next = 3;\n          return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"car\"));\n\n        case 3:\n          state.products = _context2.sent;\n          return _context2.abrupt(\"return\", JSON.parse(state.products));\n\n        case 7:\n          _context2.prev = 7;\n          _context2.t0 = _context2[\"catch\"](0);\n\n        case 9:\n          return _context2.abrupt(\"return\", state.products);\n\n        case 10:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, null, null, [[0, 7]], Promise);\n}\nexport function update(params, stack) {\n  var result, add, index, jsonValue;\n  return _regeneratorRuntime.async(function update$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.next = 2;\n          return _regeneratorRuntime.awrap(list());\n\n        case 2:\n          result = _context3.sent;\n          add = {\n            id: params.id,\n            name: params.children,\n            price: params.price,\n            image: params.image,\n            stock: stack\n          };\n          console.log(result);\n          console.log(params);\n          console.log(stack);\n          console.log(add);\n\n          try {} catch (error) {\n            console.log(error);\n          }\n\n          index = 0;\n\n        case 10:\n          if (!(index < (result == null ? void 0 : result.length))) {\n            _context3.next = 25;\n            break;\n          }\n\n          if (!(result[index].id == params.id)) {\n            _context3.next = 19;\n            break;\n          }\n\n          jsonValue = JSON.stringify(add);\n          _context3.next = 15;\n          return _regeneratorRuntime.awrap(AsyncStorage.setItem(\"car\", jsonValue));\n\n        case 15:\n          error(\"Produto ja esta no carinho\");\n          return _context3.abrupt(\"return\", state.status);\n\n        case 19:\n          state.status = \"false\";\n          success(\"Produto add no carinho\");\n          return _context3.abrupt(\"return\", state.status);\n\n        case 22:\n          index++;\n          _context3.next = 10;\n          break;\n\n        case 25:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\nexport function add(params) {\n  var add, jsonValue;\n  return _regeneratorRuntime.async(function add$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          add = {\n            id: params.id,\n            name: params.name,\n            price: params.price,\n            image: params.image,\n            stock: 1\n          };\n\n          try {\n            state.products.push(add);\n          } catch (error) {\n            console.log(error);\n          }\n\n          if (!(params.id === null)) {\n            _context4.next = 4;\n            break;\n          }\n\n          return _context4.abrupt(\"return\", false);\n\n        case 4:\n          _context4.prev = 4;\n          jsonValue = JSON.stringify(state.products);\n          _context4.next = 8;\n          return _regeneratorRuntime.awrap(AsyncStorage.setItem(\"car\", jsonValue));\n\n        case 8:\n          _context4.next = 13;\n          break;\n\n        case 10:\n          _context4.prev = 10;\n          _context4.t0 = _context4[\"catch\"](4);\n          console.log(_context4.t0);\n\n        case 13:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, null, null, [[4, 10]], Promise);\n}\n\nfunction error(msg) {\n  console.log(msg);\n}\n\nfunction success(msg) {}","map":{"version":3,"sources":["/home/jc/projetos/cursos/node/reactnative/loja/src/service/index.tsx"],"names":["BancoSql","AsyncStorage","state","products","status","items","db","validation","params","list","result","index","length","id","error","success","getItem","JSON","parse","update","stack","add","name","children","price","image","stock","console","log","jsonValue","stringify","setItem","push","msg"],"mappings":"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","sourcesContent":["import { Product } from \"../interfaces/product\";\nimport { BancoSql } from \"../core/db\";\nimport React, { useEffect, useState } from \"react\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\n\nconst state: any = {\n  products: [],\n  status: \"\",\n  items: [],\n};\nconst db = BancoSql();\n\nasync function validation(params: Product) {\n  const result = await list();\n\n  for (let index = 0; index < result?.length; index++) {\n    if (result[index].id == params.id) {\n      state.status = \"true\";\n      error(\"Produto ja esta no carinho\");\n      return state.status;\n    } else {\n      state.status = \"false\";\n      success(\"Produto add no carinho\");\n      return state.status;\n    }\n  }\n}\n\nexport async function list() {\n  try {\n    state.products = await AsyncStorage.getItem(\"car\");\n    return JSON.parse(state.products);\n  } catch (e) {\n    // error reading value\n  }\n\n  return state.products;\n}\nexport async function update(params: any, stack: number) {\n  const result = await list();\n  let add = {\n    id: params.id,\n    name: params.children,\n    price: params.price,\n    image: params.image,\n    stock: stack,\n  };\n  console.log(result);\n  console.log(params);\n  console.log(stack);\n  console.log(add);\n\n  try {\n    // state.products.push(add);\n  } catch (error) {\n    console.log(error);\n  }\n\n  for (let index = 0; index < result?.length; index++) {\n    if (result[index].id == params.id) {\n      const jsonValue = JSON.stringify(add);\n      await AsyncStorage.setItem(\"car\", jsonValue);\n      error(\"Produto ja esta no carinho\");\n      return state.status;\n    } else {\n      state.status = \"false\";\n      success(\"Produto add no carinho\");\n      return state.status;\n    }\n  }\n}\n\nexport async function add(params: Product) {\n  //let validate: any = await validation(params);\n  //if (validate == \"true\") return;\n\n  let add = {\n    id: params.id,\n    name: params.name,\n    price: params.price,\n    image: params.image,\n    stock: 1,\n  };\n\n  try {\n    state.products.push(add);\n  } catch (error) {\n    console.log(error);\n  }\n\n  if (params.id === null) {\n    return false;\n  }\n\n  try {\n    const jsonValue = JSON.stringify(state.products);\n    await AsyncStorage.setItem(\"car\", jsonValue);\n  } catch (e) {\n    console.log(e);\n  }\n}\nfunction error(msg: String) {\n  console.log(msg);\n}\nfunction success(msg: String) {}\n"]},"metadata":{},"sourceType":"module"}